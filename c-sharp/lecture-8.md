---
title: Лекция 8. Зубчатые массивы.
description: 
published: true
date: 2023-11-17T20:56:07.962Z
tags: 
editor: markdown
dateCreated: 2023-11-17T20:56:07.289Z
---

# Лекция 8. Зубчатые массивы.

## Индексы

Тип System.Index представляет индекс в последовательности
Оператор ^ (индекс с конца), который указывает, что индекс указан относительно конца последовательности
Индекс с конца ^x вычисляется как length – x.

## Диапазоны

Тип System.Range представляет вложенный диапазон последовательности.
Оператор диапазона .., который задает начало и конец диапазона в качестве своих операндов
```cs
Range rng1 = ..; // Эквивалент диапазона [0;^0).
Range rng2 = x..; // Эквивалент диапазона [x;^0).
Range rng2 = ..y; // Эквивалент диапазона [0;y).
```

```cs
using System;
int[] arr = { 0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50 };
int[] newArr1 = arr[5..11];

// Изменили значение элемента старого массива
arr[^4] = 100000;

// По этой ссылке изменений
// не будет, извлечённый
// диапазон - копия
foreach (int val in newArr1)
{
	Console.Write(val + " ");
}
```

## Копирование массивов

### Поверхностное копирование

> Не глубокое / поверхностное копирование [shallow copy] – это создание нового объекта посредством копирования всех полей с типом значений другого объекта и копирование ссылок данных ссылочных типов, но не адресуемых ими объектов
{.is-info}

### Глубокое копирование
> Глубокое копирование [deep copy] – это создание нового объекта посредством копирования всех данных исходного объекта, включая доступные по внешним ссылкам
{.is-info}

## Метод Clone()
```cs
int[] intArr1 = { 1, 2, 3 };
// Требуется приведение - Clone возвращает ссылку типа Object.
int[] intArr2 = intArr1.Clone() as int[];

// Операция as пробует выполнить
// приведение и возвращает результат
// в случае успеха, иначе - null.
```

## Прямоугольные массивы

> Размерность (Rank) прямоугольного массива равна количеству измерений, а длина (Length) – количеству элементов массива во всех измерениях
{.is-info}

```cs
// Ссылка на двумерный массив без инициализации.
int[,] arr0;
// Ссылка на трёхмерный массив без инициализации.
int[,,] arr1;
```

```cs
// Ссылка на двумерный массив с инициализацией созданным массивом.
int[,] arr2 = new int[2, 2] { { 2, 3 }, { 2, 3 } };
// Ссылка на трёхмерный массив с инициализацией созданным массивом.
int[,,] arr1 = new int[2, 3, 5];
// Укороченный синтаксис инициализации (список инициализации).
int[,] arr3 = { { 0, 0 }, { 0, 1 }, { 1, 0 }, { 1, 1 } };
// Ссылка на трёхмерный массив с явной инициализацией.
// Все элементы всех измерений заданы явно.
// arr4 состоит из четырёх групп, состоящих из трёх групп по два элемента.
int[,,] arr4 = new int[4, 3, 2] {
  { {8, 6}, {5, 2}, {12, 9} },
  { {6, 4}, {13, 9}, {18, 4} },
  { {7, 2}, {1, 13}, {9, 3} },
  { {4, 6}, {3, 2}, {23, 8} }
};

int[,] intArray2 = new int[,] { { 10, 1 }, { 2, 10 }, { 11, 9 } };
```

## Зубчатые массивы

> Зубчатые массивы [jagged arrays] – массивы, каждый элемент которых сам по себе является ссылкой на массив
{.is-info}

```cs
// Массив arr состоит из 3 одномерных массивов.
int[][] arr = new int[3][];
// Инициализируем каждый вложенный одномерный массив отдельно:
arr[0] = new int[] { 1, 2, 3 };
arr[1] = new int[] { 4, 5, 6, 7 };
arr[2] = new int[] { 8, 9, 10, 11, 12 };

// Зубчатый массив одномерных зубчатых массивов без инициализации.
int[][][] arr0;
// Массив двумерных массивов с явной инициализацией.
int[][,] arr2 =
{
new int[,] { { 10, 20 }, { 100, 200 } },
new int[2, 3] { { 30, 40, 50 }, { 300, 400, 500 } },
new int[2, 4] { { 60, 70, 80, 90 }, { 600, 700, 800, 900 } }
};
```

```cs
// А так НЕЛЬЗЯ инициализировать. Ошибка при компиляции.
int[][] arrIncorrect = new int[2][3];
```